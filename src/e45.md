<html><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vSnWKImUZLJQbkm855cLC6Jew2ogWHv8JjSSvpmijO1HPXfKtJDmXaPrpZAIZje8cnPTzXy4SRgpyY4/embed?start=false&loop=false&delayms=60000" frameborder="0" width="750" height="460" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe></html>

<html>
<button class="accordion" onclick="toggle('the-accordion');">Problem / 問</button>
<div id="the-accordion" class="panel w3-hide">
Problem 45 "Triangular, pentagonal, and hexagonal"

<p>Triangle, pentagonal, and hexagonal numbers are generated by the following formulae:</p>
<table><tr><td>Triangle</td>
<td> </td>
<td>T<sub><i>n</i></sub>=<i>n</i>(<i>n</i>+1)/2</td>
<td> </td>
<td>1, 3, 6, 10, 15, ...</td>
</tr><tr><td>Pentagonal</td>
<td> </td>
<td>P<sub><i>n</i></sub>=<i>n</i>(3<i>n</i>−1)/2</td>
<td> </td>
<td>1, 5, 12, 22, 35, ...</td>
</tr><tr><td>Hexagonal</td>
<td> </td>
<td>H<sub><i>n</i></sub>=<i>n</i>(2<i>n</i>−1)</td>
<td> </td>
<td>1, 6, 15, 28, 45, ...</td>
</tr></table><p>It can be verified that T<sub>285</sub> = P<sub>165</sub> = H<sub>143</sub> = 40755.</p>
<p>Find the next triangle number that is also pentagonal and hexagonal.</p>



問 45 「三角数, 五角数, 六角数」

三角数, 五角数, 六角数は以下のように生成される.

T<sub>285</sub> = P<sub>165</sub> = H<sub>143</sub> = 40755 であることが分かる.

次の三角数かつ五角数かつ六角数な数を求めよ.

</div>
</html>


```rust,editable
struct Pentagon {
    n: u64,
    v: u64,
}

impl Pentagon {
    fn increment(&mut self) {
        self.v += self.n * 3 + 1;
        self.n += 1;
    }
    fn value(&self) -> u64 {
        self.v
    }
}

struct Hexagon {
    n: u64,
    v: u64,
}

impl Hexagon {
    fn increment(&mut self) {
        self.v += 4 * self.n + 1;
        self.n += 1;
    }
    fn value(&self) -> u64 {
        self.v
    }
}

fn main() {
    let mut p = Pentagon { n: 165, v: 40755 };
    let mut h = Hexagon { n: 143, v: 40755 };
    p.increment();
    let v = loop {
        while p.value() < h.value() {
            p.increment();
        }
        while h.value() < p.value() {
            h.increment();
        }
        if p.value() == h.value() {
            break p.value();
        }
    };

    println!("{}", v);
    assert_eq!(v, 1533776805);
}
```
