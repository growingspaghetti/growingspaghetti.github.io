<html><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTTJxJFxMM7KkbNVNMuhPlLG4EJdhHkaJKgibWTKEeKjuzUlvoNJ-qDBOC9qDxd9FbIS4y-Zf76P5F8/embed?start=false&loop=false&delayms=60000" frameborder="0" width="750" height="460" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe></html>

<html>
<button class="accordion" onclick="toggle('the-accordion');">Problem / 問</button>
<div id="the-accordion" class="panel w3-hide">
Problem 4 "Largest palindrome product"
<p>A palindromic number reads the same both ways. The largest palindrome made from the product of two 2-digit numbers is 9009 = 91 × 99.</p>
<p>Find the largest palindrome made from the product of two 3-digit numbers.</p>

問 4 「最大の回文積」

左右どちらから読んでも同じ値になる数を回文数という. 2桁の数の積で表される回文数のうち, 最大のものは 9009 = 91 × 99 である.

では, 3桁の数の積で表される回文数の最大値を求めよ.
</div>
</html>

```rust,editable
fn is_palindrome(a: u32) -> bool {
    let mut t = a;
    let mut b = 0u32;
    while t > 0 {
        b *= 10;
        b += t % 10;
        t /= 10;
    }
    a == b
}

fn update_largest_palindrome_product(lpp: &mut Option<u32>, with: u32) {
    match lpp.as_mut() {
        Some(v) => *v = with,
        None => *lpp = Some(with),
    }
}

fn scan_b(a: u32, largest_pp: &mut Option<u32>) {
    let mut b = 999;
    while b >= a {
        let p = a * b;
        if p <= largest_pp.unwrap_or_default() {
            return;
        }
        if is_palindrome(p) {
            update_largest_palindrome_product(largest_pp, p);
        }
        b -= 1;
    }
}

fn main() {
    let mut largest_pal_pro: Option<u32> = None;
    for a in (110..=990).rev().step_by(11) {
        scan_b(a, &mut largest_pal_pro);
    }
    let ans = largest_pal_pro.unwrap();

    println!("{}", ans);
    assert_eq!(ans, 906609);
}
```
